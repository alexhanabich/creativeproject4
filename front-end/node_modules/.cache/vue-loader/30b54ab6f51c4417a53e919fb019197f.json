{"remainingRequest":"/Users/jpark/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jpark/Desktop/School/CS260/CP4/front-end/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jpark/Desktop/School/CS260/CP4/front-end/src/views/Home.vue","mtime":1586732193143},{"path":"/Users/jpark/Desktop/School/CS260/CP4/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jpark/Desktop/School/CS260/CP4/front-end/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jpark/Desktop/School/CS260/CP4/front-end/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jpark/Desktop/School/CS260/CP4/front-end/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwogIGltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CiAgaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwoKICBleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnSG9tZScsCiAgICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICBpdGVtczogW10sCiAgICAgIGFkZGVkTmFtZTogJycsCiAgICAgIGFkZGVkQ29tbWVudDogJycsCiAgICAgIGFkZGVkVGltZVN0YW1wOiAnJywKICAgICAgY29tbWVudEluZGV4OiAnJywKICAgICAgY29tbWVudHM6IFtdLAogICAgICBjb21tZW50RGF0YToge30sCiAgICAgIAogICAgICB9CiAgICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEl0ZW1zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBhZGRDb21tZW50KGl0ZW0pIHsKICAgICAgdHJ5IHsKICAgICAgICBpdGVtLmluZGV4ICs9IDE7CiAgICAgICAgLy90aGlzLmNvbW1lbnREYXRhLmFkZGVkVGltZXN0YW1wID0gKCdNTU1NIERvIGg6bW0gYScpCiAgICAgICAgdGhpcy5jb21tZW50cy5wdXNoKHsKICAgICAgICAgIGF1dGhvcjogdGhpcy5hZGRlZE5hbWUsCiAgICAgICAgICB0ZXh0OiB0aGlzLmFkZGVkQ29tbWVudCwKICAgICAgICAgIGluZGV4OiBpdGVtLmluZGV4LAogICAgICAgICAgdGltZXN0YW1wOiBtb21lbnQoKS5mb3JtYXQoJ01NTU0gRG8gaDptbSBhJykKICAgICAgICB9KTsKICAgICAgICBhd2FpdCBheGlvcy5wdXQoIi9hcGkvaXRlbXMvIiArIGl0ZW0uX2lkLCB7CiAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICAgIGRlc2NyaXB0aW9uOiBpdGVtLmRlc2NyaXB0aW9uLAogICAgICAgICAgbGlrZXM6IGl0ZW0ubGlrZXMsCiAgICAgICAgICBpbmRleDogaXRlbS5pbmRleCwKICAgICAgICAgIGNvbW1lbnRzOiB0aGlzLmNvbW1lbnRzLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuYWRkZWROYW1lID0gJyc7CiAgICAgICAgdGhpcy5hZGRlZENvbW1lbnQgPSAnJzsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICAgICAgLyoKICAgICAgICAgICAgaWYgKCEodGhpcy5pdGVtLmluZGV4IGluIHRoaXMuY29tbWVudHMpKQogICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY29tbWVudHMsIGl0ZW0uaW5kZXgsIG5ldyBBcnJheSk7CiAgICAgICAgICAgIHRoaXMuY29tbWVudHNbaXRlbS5pbmRleF0ucHVzaCh7CiAgICAgICAgICAgICAgICBhdXRob3I6IHRoaXMuYWRkZWROYW1lLAogICAgICAgICAgICAgICAgdGV4dDogdGhpcy5hZGRlZENvbW1lbnQsCiAgICAgICAgICAgICAgICAvL3RpbWVzdGFtcDogbW9tZW50KCkuZm9ybWF0KCdNTU1NIERvIGg6bW0gYScpLAogICAgICAgICAgICAgICAgY29tbWVudEluZGV4OiB0aGlzLmNvbW1lbnRJbmRleCwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuYWRkZWROYW1lID0gJyc7CiAgICAgICAgICAgIHRoaXMuYWRkZWRDb21tZW50ID0gJyc7CiAgICAgICAgICAgIC8vdGhpcy5hZGRlZFRpbWVzdGFtcCA9ICcnOwogICAgICAgICAgICB0aGlzLmNvbW1lbnRJbmRleCArPSAxOwogICAgICB9CiAgICB9LCovCiAgICBhc3luYyBhZGRMaWtlKGl0ZW0pIHsKICAgICAgdHJ5IHsKICAgICAgICBpdGVtLmxpa2VzICs9IDE7CiAgICAgICAgYXdhaXQgYXhpb3MucHV0KCIvYXBpL2l0ZW1zLyIgKyBpdGVtLl9pZCwgewogICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogaXRlbS5kZXNjcmlwdGlvbiwKICAgICAgICAgIGxpa2VzOiBpdGVtLmxpa2VzLAogICAgICAgICAgaW5kZXg6IGl0ZW0uaW5kZXgsCiAgICAgICAgICBjb21tZW50czogaXRlbS5jb21tZW50cywKICAgICAgICB9KTsKICAgICAgICB0aGlzLmdldEl0ZW1zKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZ2V0SXRlbXMoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCIvYXBpL2l0ZW1zIik7CiAgICAgICAgdGhpcy5pdGVtcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <section class=\"image-gallery\">\n      <div class=\"image\" v-for=\"item in items\" :key=\"item.id\">\n        <h3>{{item.title}}</h3>\n        <img :src=\"item.path\" />\n        <h2>{{item.description}}</h2>\n        <h2 v-if = \"item.likes != 1\">Votes: {{item.likes}}  <button class=\"auto\" @click=\"addLike(item)\"><i class=\"far fa-thumbs-up fa-2x\"></i></button></h2>\n        <h2 v-else> Vote: {{item.likes}}  <button class=\"auto\" @click=\"addLike(item)\"><i class=\"far fa-thumbs-up fa-2x\"></i></button></h2>\n        <h3>Add a Comment</h3>\n        <form v-on:submit.prevent=\"addComment(item)\">\n          <input v-model=\"addedName\" placeholder=\"Name\">\n          <textarea v-model=\"addedComment\"></textarea>\n          <br />\n          <button type=\"submit\">Comment</button>\n        </form>\n        <div v-for=\"comment in item.comments\" :key=\"comment.index\"> \n          <hr>\n          <p>{{comment.text}}</p>\n          <p><i>-- {{comment.author}}</i></p>\n          <p>{{comment.timestamp}}</p>\n        </div>\n        \n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n  import axios from 'axios';\n  import moment from 'moment';\n\n  export default {\n    name: 'Home',\n    data() {\n      return {\n      items: [],\n      addedName: '',\n      addedComment: '',\n      addedTimeStamp: '',\n      commentIndex: '',\n      comments: [],\n      commentData: {},\n      \n      }\n    },\n  created() {\n    this.getItems();\n  },\n  methods: {\n    async addComment(item) {\n      try {\n        item.index += 1;\n        //this.commentData.addedTimestamp = ('MMMM Do h:mm a')\n        this.comments.push({\n          author: this.addedName,\n          text: this.addedComment,\n          index: item.index,\n          timestamp: moment().format('MMMM Do h:mm a')\n        });\n        await axios.put(\"/api/items/\" + item._id, {\n          title: item.title,\n          description: item.description,\n          likes: item.likes,\n          index: item.index,\n          comments: this.comments,\n        });\n        this.addedName = '';\n        this.addedComment = '';\n      } catch (error) {\n        console.log(error);\n      }\n    },\n        /*\n            if (!(this.item.index in this.comments))\n                this.$set(this.comments, item.index, new Array);\n            this.comments[item.index].push({\n                author: this.addedName,\n                text: this.addedComment,\n                //timestamp: moment().format('MMMM Do h:mm a'),\n                commentIndex: this.commentIndex,\n            });\n            this.addedName = '';\n            this.addedComment = '';\n            //this.addedTimestamp = '';\n            this.commentIndex += 1;\n      }\n    },*/\n    async addLike(item) {\n      try {\n        item.likes += 1;\n        await axios.put(\"/api/items/\" + item._id, {\n          title: item.title,\n          description: item.description,\n          likes: item.likes,\n          index: item.index,\n          comments: item.comments,\n        });\n        this.getItems();\n        return true;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async getItems() {\n      try {\n        let response = await axios.get(\"/api/items\");\n        this.items = response.data;\n        return true;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n}\n</script>\n\n<style scoped>\n.image h2 {\n  font-style: italic;\n}\n\n/* Masonry */\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n}\n\n.image-gallery {\n  column-gap: 1.5em;\n}\n\n.image {\n  margin: 0 0 1.5em;\n  display: inline-block;\n  width: 100%;\n}\n\n.image img {\n  width: 100%;\n}\n\n\n/* Masonry on large screens */\n@media only screen and (min-width: 1024px) {\n  .image-gallery {\n    column-count: 4;\n  }\n}\n\n/* Masonry on medium-sized screens */\n@media only screen and (max-width: 1023px) and (min-width: 768px) {\n  .image-gallery {\n    column-count: 3;\n  }\n}\n\n/* Masonry on small screens */\n@media only screen and (max-width: 767px) and (min-width: 540px) {\n  .image-gallery {\n    column-count: 2;\n  }\n}\n</style>"]}]}